<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Library System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: #f8f9fa;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px;
            border-radius: 0px;
            display: none;
            z-index: 1000;
            border: 3px solid #000;
            box-shadow: 5px 5px 0px #000;
        }
        
        .book-cover {
            transition: transform 0.3s ease;
            border: 3px solid #000;
            box-shadow: 5px 5px 0px #000;
        }
        
        .book-cover:hover {
            transform: scale(1.02);
        }
        
        .chat-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 0px;
            margin-bottom: 10px;
            border: 2px solid #000;
            box-shadow: 3px 3px 0px #000;
        }
        
        .user-message {
            background-color: #fef08a;
            margin-left: auto;
        }
        
        .bot-message {
            background-color: #bae6fd;
            margin-right: auto;
        }
        
        .typing-indicator {
            display: inline-block;
            width: 30px;
        }
        
        .typing-indicator span {
            height: 10px;
            width: 10px;
            float: left;
            margin: 0 1px;
            background-color: #000;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
        }
        
        .typing-indicator span:nth-of-type(1) {
            animation: 1s blink infinite 0.3333s;
        }
        
        .typing-indicator span:nth-of-type(2) {
            animation: 1s blink infinite 0.6666s;
        }
        
        .typing-indicator span:nth-of-type(3) {
            animation: 1s blink infinite 0.9999s;
        }
        
        @keyframes blink {
            50% {
                opacity: 1;
            }
        }
        
        .department-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0px;
            margin-right: 10px;
            border: 2px solid #000;
            box-shadow: 3px 3px 0px #000;
        }
        
        .book-status-available {
            color: #16a34a;
        }
        
        .book-status-issued {
            color: #dc2626;
        }
        
        /* Neubrutalism styles */
        .nb-button {
            border: 3px solid #000;
            box-shadow: 5px 5px 0px #000;
            transition: all 0.2s ease;
        }
        
        .nb-button:hover {
            box-shadow: 3px 3px 0px #000;
            transform: translate(2px, 2px);
        }
        
        .nb-card {
            border: 3px solid #000;
            box-shadow: 6px 6px 0px #000;
            transition: all 0.2s ease;
        }
        
        .nb-card:hover {
            box-shadow: 4px 4px 0px #000;
            transform: translate(2px, 2px);
        }
        
        .nb-input {
            border: 2px solid #000;
            box-shadow: 3px 3px 0px #000;
        }
        
        .nb-input:focus {
            box-shadow: 2px 2px 0px #000;
            transform: translate(1px, 1px);
        }
        
        .nb-select {
            border: 2px solid #000;
            box-shadow: 3px 3px 0px #000;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23000000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        .nb-select:focus {
            box-shadow: 2px 2px 0px #000;
            transform: translate(1px, 1px);
        }
        
        /* Colors for departments */
        .cs-color { background-color: #bfdbfe; }
        .ee-color { background-color: #fef08a; }
        .me-color { background-color: #a7f3d0; }
        .ce-color { background-color: #fecaca; }
        .ch-color { background-color: #d8b4fe; }
        .ph-color { background-color: #c7d2fe; }
        .ma-color { background-color: #e9d5ff; }
        .bi-color { background-color: #bbf7d0; }
        .li-color { background-color: #fcd34d; }
        .hi-color { background-color: #f9a8d4; }
        
        /* Loader */
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #000;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <!-- Public Home Page -->
    <div id="publicHomePage" class="min-h-screen pb-10">
        <!-- Navigation Bar -->
        <nav class="bg-yellow-300 border-b-4 border-black">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-4">
                        <a href="#" class="font-bold text-2xl flex items-center">
                            <i class="bi bi-book-half mr-2 text-3xl"></i>
                            <span class="bg-white px-2 py-1 border-2 border-black">College Library</span>
                        </a>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <button onclick="showLoginPage()" class="bg-green-300 px-5 py-2 font-bold nb-button">
                            <i class="bi bi-person-circle mr-1"></i> Student Login
                        </button>
                        <button onclick="showAdminLogin()" class="bg-blue-300 px-5 py-2 font-bold nb-button">
                            <i class="bi bi-shield-lock mr-1"></i> Admin
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <div class="bg-blue-200 py-16 border-b-4 border-black">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto text-center">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">Welcome to the College Library</h1>
                    <p class="text-xl mb-8">Explore thousands of books, journals, and academic resources</p>
                    
                    <div class="bg-white p-4 nb-card mx-auto max-w-2xl">
                        <div class="flex flex-col md:flex-row gap-4">
                            <div class="flex-grow relative">
                                <input type="text" id="publicSearchInput" placeholder="Search any book, author or subject" 
                                    class="block w-full px-4 py-3 nb-input focus:outline-none">
                            </div>
                            
                            <button onclick="publicSearch()" class="bg-purple-300 px-5 py-3 font-bold nb-button md:flex-shrink-0">
                                <i class="bi bi-search mr-1"></i> Search
                            </button>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mt-4 justify-center">
                            <button onclick="publicQuickFilter('computer science')" class="px-3 py-1 text-sm bg-blue-200 hover:bg-blue-300 border border-black">Computer Science</button>
                            <button onclick="publicQuickFilter('engineering')" class="px-3 py-1 text-sm bg-yellow-200 hover:bg-yellow-300 border border-black">Engineering</button>
                            <button onclick="publicQuickFilter('mathematics')" class="px-3 py-1 text-sm bg-green-200 hover:bg-green-300 border border-black">Mathematics</button>
                            <button onclick="publicQuickFilter('physics')" class="px-3 py-1 text-sm bg-indigo-200 hover:bg-indigo-300 border border-black">Physics</button>
                            <button onclick="publicQuickFilter('chemistry')" class="px-3 py-1 text-sm bg-purple-200 hover:bg-purple-300 border border-black">Chemistry</button>
                            <button onclick="publicQuickFilter('biology')" class="px-3 py-1 text-sm bg-pink-200 hover:bg-pink-300 border border-black">Biology</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Public Search Results -->
        <div class="container mx-auto px-4 py-8">
            <div id="publicSearchResults" class="hidden space-y-6">
                <h2 class="text-2xl font-bold flex items-center">
                    <i class="bi bi-list-ul mr-2 bg-yellow-200 p-2 border-2 border-black"></i>
                    Search Results (<span id="publicResultCount">0</span>)
                </h2>
                
                <div id="publicNoResults" class="hidden bg-gray-100 p-8 rounded-lg text-center border-2 border-black">
                    <i class="bi bi-search text-5xl mb-2 block"></i>
                    <h3 class="text-lg font-bold mb-1">No results found</h3>
                    <p>Try different keywords or browse by category</p>
                </div>
                
                <div id="publicSearchResultsList" class="grid grid-cols-1 gap-4">
                    <!-- Search results will be loaded here -->
                </div>
                
                <div class="text-center mt-6">
                    <p class="mb-3 text-lg">Want to borrow a book? Login as a student</p>
                    <button onclick="showLoginPage()" class="bg-green-300 px-5 py-3 font-bold nb-button">
                        <i class="bi bi-box-arrow-in-right mr-1"></i> Student Login
                    </button>
                </div>
            </div>

            <!-- Featured Books Section -->
            <div id="featuredBooks" class="mt-10 space-y-10">
                <div>
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <i class="bi bi-stars mr-2 bg-yellow-200 p-2 border-2 border-black"></i>
                        Featured Books
                    </h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="featuredBooksList">
                        <!-- Featured books will be loaded here -->
                        <div class="animate-pulse">
                            <div class="bg-gray-200 rounded-md h-64 mb-2 nb-card"></div>
                            <div class="h-5 bg-gray-200 rounded w-3/4 border border-black"></div>
                            <div class="h-4 bg-gray-200 rounded w-1/2 mt-2 border border-black"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 rounded-md h-64 mb-2 nb-card"></div>
                            <div class="h-5 bg-gray-200 rounded w-3/4 border border-black"></div>
                            <div class="h-4 bg-gray-200 rounded w-1/2 mt-2 border border-black"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 rounded-md h-64 mb-2 nb-card"></div>
                            <div class="h-5 bg-gray-200 rounded w-3/4 border border-black"></div>
                            <div class="h-4 bg-gray-200 rounded w-1/2 mt-2 border border-black"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 rounded-md h-64 mb-2 nb-card"></div>
                            <div class="h-5 bg-gray-200 rounded w-3/4 border border-black"></div>
                            <div class="h-4 bg-gray-200 rounded w-1/2 mt-2 border border-black"></div>
                        </div>
                    </div>
                </div>

                <div>
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <i class="bi bi-file-earmark-medical mr-2 bg-green-200 p-2 border-2 border-black"></i>
                        Exam Resources
                    </h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        <div class="nb-card bg-white p-4 hover:bg-blue-100">
                            <div class="bg-blue-200 p-4 mb-3 border-2 border-black">
                                <i class="bi bi-file-earmark-code-fill text-4xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">JEE Mains & Advanced</h3>
                            <p class="text-sm mb-3">Previous year question papers and study materials for engineering entrance.</p>
                            <a href="#" class="inline-block bg-blue-300 px-3 py-1 text-sm font-bold nb-button">
                                Download
                            </a>
                        </div>
                        
                        <div class="nb-card bg-white p-4 hover:bg-purple-100">
                            <div class="bg-purple-200 p-4 mb-3 border-2 border-black">
                                <i class="bi bi-file-earmark-medical-fill text-4xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">GATE</h3>
                            <p class="text-sm mb-3">Graduate Aptitude Test in Engineering for Masters & PSUs.</p>
                            <a href="#" class="inline-block bg-purple-300 px-3 py-1 text-sm font-bold nb-button">
                                Download
                            </a>
                        </div>
                        
                        <div class="nb-card bg-white p-4 hover:bg-yellow-100">
                            <div class="bg-yellow-200 p-4 mb-3 border-2 border-black">
                                <i class="bi bi-file-earmark-slides-fill text-4xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">UGC NET</h3>
                            <p class="text-sm mb-3">National Eligibility Test for faculty positions and JRF.</p>
                            <a href="#" class="inline-block bg-yellow-300 px-3 py-1 text-sm font-bold nb-button">
                                Download
                            </a>
                        </div>
                        
                        <div class="nb-card bg-white p-4 hover:bg-green-100">
                            <div class="bg-green-200 p-4 mb-3 border-2 border-black">
                                <i class="bi bi-file-earmark-richtext-fill text-4xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2">More Exams</h3>
                            <p class="text-sm mb-3">CAT, GRE, NEET and other competitive exam resources.</p>
                            <a href="#" class="inline-block bg-green-300 px-3 py-1 text-sm font-bold nb-button">
                                Explore All
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Library Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mt-16">
                <div class="bg-green-200 p-6 text-center nb-card">
                    <h3 class="text-3xl font-bold mb-2">10,000+</h3>
                    <p class="font-medium">Books</p>
                </div>
                <div class="bg-yellow-200 p-6 text-center nb-card">
                    <h3 class="text-3xl font-bold mb-2">500+</h3>
                    <p class="font-medium">Research Papers</p>
                </div>
                <div class="bg-blue-200 p-6 text-center nb-card">
                    <h3 class="text-3xl font-bold mb-2">300+</h3>
                    <p class="font-medium">Journals</p>
                </div>
                <div class="bg-purple-200 p-6 text-center nb-card">
                    <h3 class="text-3xl font-bold mb-2">24x7</h3>
                    <p class="font-medium">Digital Access</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="bg-black text-white py-8 mt-16">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4">College Library</h3>
                        <p class="mb-4">The perfect place to explore, learn, and grow with thousands of academic resources.</p>
                        <p class="flex items-center">
                            <i class="bi bi-envelope-fill mr-2"></i> library@college.edu
                        </p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4">Opening Hours</h3>
                        <ul class="space-y-2">
                            <li>Monday - Friday: 8:00 AM - 10:00 PM</li>
                            <li>Saturday: 9:00 AM - 8:00 PM</li>
                            <li>Sunday: 10:00 AM - 6:00 PM</li>
                            <li class="text-yellow-300">24/7 Digital Library Access</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                        <ul class="space-y-2">
                            <li><a href="#" class="hover:underline">About Us</a></li>
                            <li><a href="#" class="hover:underline">Library Policies</a></li>
                            <li><a href="#" class="hover:underline">Research Resources</a></li>
                            <li><a href="#" class="hover:underline">Contact Us</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="border-t border-gray-600 mt-6 pt-6 text-center">
                    <p>&copy; 2023 College Library. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4 hidden">
        <div class="max-w-md w-full bg-white nb-card">
            <div class="bg-green-300 py-4 px-6 border-b-3 border-black">
                <h1 class="text-2xl font-bold flex items-center">
                    <i class="bi bi-book-half mr-2"></i>
                    Student Login
                </h1>
                <p class="text-gray-800 mt-1">Access your library account</p>
            </div>
            
            <div class="p-6">
                <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Student ID</label>
                        <div class="mt-1 relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="bi bi-person-badge text-gray-400"></i>
                            </div>
                            <input type="text" id="studentId" required class="block w-full pl-10 pr-3 py-3 border-2 border-black rounded-none nb-input focus:outline-none" placeholder="Enter your student ID">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Department</label>
                        <div class="mt-1 relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="bi bi-building text-gray-400"></i>
                            </div>
                            <select id="department" required class="block w-full pl-10 pr-3 py-3 nb-select border-2 border-black rounded-none focus:outline-none">
                                <option value="">Select your department</option>
                                <option value="computer-science">Computer Science</option>
                                <option value="electrical-engineering">Electrical Engineering</option>
                                <option value="mechanical-engineering">Mechanical Engineering</option>
                                <option value="civil-engineering">Civil Engineering</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="physics">Physics</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="biology">Biology</option>
                                <option value="literature">Literature</option>
                                <option value="history">History</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center text-sm">
                        <div class="flex items-center">
                            <input type="checkbox" id="remember" class="h-4 w-4 border-2 border-black">
                            <label for="remember" class="ml-2 text-gray-700">Remember me</label>
                        </div>
                        <a href="#" class="text-blue-600 hover:underline">Forgot ID?</a>
                    </div>
                    
                    <div>
                        <button type="submit" class="w-full py-3 px-4 text-center font-bold bg-green-300 text-black nb-button">
                            <i class="bi bi-box-arrow-in-right mr-2"></i> Login
                        </button>
                    </div>
                    
                    <div class="text-center text-sm border-t-2 border-black pt-4 mt-4">
                        <p class="text-gray-700 mb-2">For test accounts, use:</p>
                        <p class="text-gray-900 font-bold">
                            <span>CS101</span> (Computer Science, no books) or
                            <span>EE202</span> (Electrical, with books)
                        </p>
                    </div>
                </form>
                
                <div class="text-center mt-6">
                    <button onclick="hideLoginPage()" class="text-sm underline text-gray-600 hover:text-black">
                        <i class="bi bi-arrow-left"></i> Back to home page
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Admin Login -->
    <div id="adminLoginPage" class="min-h-screen flex items-center justify-center p-4 hidden">
        <div class="max-w-md w-full bg-white nb-card">
            <div class="bg-blue-300 py-4 px-6 border-b-3 border-black">
                <h1 class="text-2xl font-bold flex items-center">
                    <i class="bi bi-shield-lock mr-2"></i>
                    Admin Login
                </h1>
                <p class="text-gray-800 mt-1">Library Management System</p>
            </div>
            
            <div class="p-6">
                <form id="adminLoginForm" onsubmit="handleAdminLogin(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Admin Username</label>
                        <div class="mt-1 relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="bi bi-person-badge text-gray-400"></i>
                            </div>
                            <input type="text" id="adminUsername" required class="block w-full pl-10 pr-3 py-3 border-2 border-black rounded-none nb-input focus:outline-none" placeholder="Enter admin username">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Password</label>
                        <div class="mt-1 relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="bi bi-key text-gray-400"></i>
                            </div>
                            <input type="password" id="adminPassword" required class="block w-full pl-10 pr-3 py-3 border-2 border-black rounded-none nb-input focus:outline-none" placeholder="Enter password">
                        </div>
                    </div>
                    
                    <div>
                        <button type="submit" class="w-full py-3 px-4 text-center font-bold bg-blue-300 text-black nb-button">
                            <i class="bi bi-box-arrow-in-right mr-2"></i> Login
                        </button>
                    </div>
                    
                    <div class="text-center text-sm border-t-2 border-black pt-4 mt-4">
                        <p class="text-gray-900 font-bold">
                            For admin login, use: <br>
                            Username: <span>admin</span> <br>
                            Password: <span>admin123</span>
                        </p>
                    </div>
                </form>
                
                <div class="text-center mt-6">
                    <button onclick="hideAdminLogin()" class="text-sm underline text-gray-600 hover:text-black">
                        <i class="bi bi-arrow-left"></i> Back to home page
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="min-h-screen hidden bg-gray-100">
        <!-- Admin Navigation -->
        <nav class="bg-blue-300 border-b-3 border-black">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-3">
                    <div class="flex items-center space-x-4">
                        <a href="#" class="font-bold text-xl flex items-center">
                            <i class="bi bi-shield-lock mr-2 text-2xl"></i>
                            <span class="bg-white px-2 py-1 border-2 border-black">Library Admin</span>
                        </a>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <button onclick="logoutAdmin()" class="bg-white px-3 py-1 font-bold nb-button">
                            <i class="bi bi-box-arrow-right mr-1"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container mx-auto p-4">
            <!-- Admin Sections Tabs -->
            <div class="bg-white border-2 border-black mb-6 overflow-hidden">
                <div class="flex flex-wrap border-b-2 border-black">
                    <button onclick="showAdminSection('dashboard')" id="adminTabDashboard" class="px-5 py-3 font-bold bg-blue-200 border-r-2 border-black">Dashboard</button>
                    <button onclick="showAdminSection('students')" id="adminTabStudents" class="px-5 py-3 font-bold border-r-2 border-black">Students</button>
                    <button onclick="showAdminSection('books')" id="adminTabBooks" class="px-5 py-3 font-bold border-r-2 border-black">Books</button>
                    <button onclick="showAdminSection('issued')" id="adminTabIssued" class="px-5 py-3 font-bold">Issued Books</button>
                </div>

                <!-- Admin Dashboard Section -->
                <div id="adminSectionDashboard" class="p-6">
                    <h2 class="text-2xl font-bold mb-6">Admin Dashboard</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-green-200 p-6 flex nb-card">
                            <div class="mr-4 bg-white p-3 border-2 border-black">
                                <i class="bi bi-book text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold">42</h3>
                                <p class="font-medium">Books Issued</p>
                            </div>
                        </div>
                        <div class="bg-yellow-200 p-6 flex nb-card">
                            <div class="mr-4 bg-white p-3 border-2 border-black">
                                <i class="bi bi-person text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold">215</h3>
                                <p class="font-medium">Students</p>
                            </div>
                        </div>
                        <div class="bg-blue-200 p-6 flex nb-card">
                            <div class="mr-4 bg-white p-3 border-2 border-black">
                                <i class="bi bi-exclamation-triangle text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold">12</h3>
                                <p class="font-medium">Overdue Books</p>
                            </div>
                        </div>
                        <div class="bg-purple-200 p-6 flex nb-card">
                            <div class="mr-4 bg-white p-3 border-2 border-black">
                                <i class="bi bi-arrow-left-right text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="text-3xl font-bold">85</h3>
                                <p class="font-medium">Transactions</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 border-2 border-black">
                            <h3 class="text-xl font-bold mb-4 flex items-center">
                                <i class="bi bi-exclamation-circle mr-2 text-red-500"></i>
                                Books Overdue
                            </h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="border-b-2 border-black">
                                        <tr>
                                            <th class="py-2 text-left">Book</th>
                                            <th class="py-2 text-left">Student</th>
                                            <th class="py-2 text-left">Days Overdue</th>
                                            <th class="py-2 text-left">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b border-black">
                                            <td class="py-2">Power Electronics</td>
                                            <td class="py-2">Maria Rodriguez</td>
                                            <td class="py-2 text-red-500 font-bold">5</td>
                                            <td class="py-2">
                                                <button class="bg-yellow-200 px-2 py-1 text-sm border border-black">
                                                    Notify
                                                </button>
                                            </td>
                                        </tr>
                                        <tr class="border-b border-black">
                                            <td class="py-2">Organic Chemistry</td>
                                            <td class="py-2">James Wilson</td>
                                            <td class="py-2 text-red-500 font-bold">2</td>
                                            <td class="py-2">
                                                <button class="bg-yellow-200 px-2 py-1 text-sm border border-black">
                                                    Notify
                                                </button>
                                            </td>
                                        </tr>
                                        <tr class="border-b border-black">
                                            <td class="py-2">Computer Networks</td>
                                            <td class="py-2">Sarah Johnson</td>
                                            <td class="py-2 text-red-500 font-bold">8</td>
                                            <td class="py-2">
                                                <button class="bg-yellow-200 px-2 py-1 text-sm border border-black">
                                                    Notify
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 border-2 border-black">
                            <h3 class="text-xl font-bold mb-4 flex items-center">
                                <i class="bi bi-calendar-check mr-2 text-green-500"></i>
                                Recent Transactions
                            </h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead class="border-b-2 border-black">
                                        <tr>
                                            <th class="py-2 text-left">Type</th>
                                            <th class="py-2 text-left">Book</th>
                                            <th class="py-2 text-left">Student</th>
                                            <th class="py-2 text-left">Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b border-black">
                                            <td class="py-2">
                                                <span class="inline-block px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold">
                                                    Returned
                                                </span>
                                            </td>
                                            <td class="py-2">Calculus for Engineers</td>
                                            <td class="py-2">David Chen</td>
                                            <td class="py-2">May 18, 2023</td>
                                        </tr>
                                        <tr class="border-b border-black">
                                            <td class="py-2">
                                                <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold">
                                                    Issued
                                                </span>
                                            </td>
                                            <td class="py-2">Data Structures</td>
                                            <td class="py-2">Emma Watson</td>
                                            <td class="py-2">May 17, 2023</td>
                                        </tr>
                                        <tr class="border-b border-black">
                                            <td class="py-2">
                                                <span class="inline-block px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold">
                                                    Returned
                                                </span>
                                            </td>
                                            <td class="py-2">Modern Physics</td>
                                            <td class="py-2">Alex Johnson</td>
                                            <td class="py-2">May 16, 2023</td>
                                        </tr>
                                        <tr class="border-b border-black">
                                            <td class="py-2">
                                                <span class="inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold">
                                                    Issued
                                                </span>
                                            </td>
                                            <td class="py-2">Intro to AI</td>
                                            <td class="py-2">Maria Rodriguez</td>
                                            <td class="py-2">May 15, 2023</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Students Section -->
                <div id="adminSectionStudents" class="p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Students Database</h2>
                        <div class="flex">
                            <div class="relative mr-2">
                                <input type="text" placeholder="Search students..." class="px-4 py-2 border-2 border-black nb-input">
                            </div>
                            <button class="bg-green-300 px-4 py-2 font-bold nb-button">
                                <i class="bi bi-plus-lg mr-1"></i> Add Student
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto border-2 border-black bg-white">
                        <table class="min-w-full">
                            <thead class="bg-gray-100 border-b-2 border-black">
                                <tr>
                                    <th class="py-3 px-4 text-left">ID</th>
                                    <th class="py-3 px-4 text-left">Name</th>
                                    <th class="py-3 px-4 text-left">Department</th>
                                    <th class="py-3 px-4 text-left">Books Issued</th>
                                    <th class="py-3 px-4 text-left">Status</th>
                                    <th class="py-3 px-4 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200" id="adminStudentsList">
                                <tr>
                                    <td class="py-3 px-4">CS101</td>
                                    <td class="py-3 px-4">Alex Johnson</td>
                                    <td class="py-3 px-4">Computer Science</td>
                                    <td class="py-3 px-4">0</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">EE202</td>
                                    <td class="py-3 px-4">Maria Rodriguez</td>
                                    <td class="py-3 px-4">Electrical Engineering</td>
                                    <td class="py-3 px-4">3</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-yellow-100 border border-yellow-800 text-yellow-800 text-xs font-semibold">
                                            Has Overdue
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">ME103</td>
                                    <td class="py-3 px-4">David Chen</td>
                                    <td class="py-3 px-4">Mechanical Engineering</td>
                                    <td class="py-3 px-4">1</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">PH205</td>
                                    <td class="py-3 px-4">Emma Watson</td>
                                    <td class="py-3 px-4">Physics</td>
                                    <td class="py-3 px-4">2</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">CH104</td>
                                    <td class="py-3 px-4">James Wilson</td>
                                    <td class="py-3 px-4">Chemistry</td>
                                    <td class="py-3 px-4">1</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-yellow-100 border border-yellow-800 text-yellow-800 text-xs font-semibold">
                                            Has Overdue
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Books Section -->
                <div id="adminSectionBooks" class="p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Books Database</h2>
                        <div class="flex">
                            <div class="relative mr-2">
                                <input type="text" placeholder="Search books..." class="px-4 py-2 border-2 border-black nb-input">
                            </div>
                            <button class="bg-green-300 px-4 py-2 font-bold nb-button">
                                <i class="bi bi-plus-lg mr-1"></i> Add Book
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto border-2 border-black bg-white">
                        <table class="min-w-full">
                            <thead class="bg-gray-100 border-b-2 border-black">
                                <tr>
                                    <th class="py-3 px-4 text-left">ID</th>
                                    <th class="py-3 px-4 text-left">Title</th>
                                    <th class="py-3 px-4 text-left">Author</th>
                                    <th class="py-3 px-4 text-left">Category</th>
                                    <th class="py-3 px-4 text-left">Status</th>
                                    <th class="py-3 px-4 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200" id="adminBooksList">
                                <!-- Books will be loaded here from the scripts -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="flex justify-end mt-4">
                        <div class="flex border-2 border-black">
                            <button class="px-3 py-1 border-r-2 border-black bg-gray-100">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <button class="px-3 py-1 font-bold bg-yellow-100 border-r-2 border-black">1</button>
                            <button class="px-3 py-1 border-r-2 border-black">2</button>
                            <button class="px-3 py-1">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Issued Books Section -->
                <div id="adminSectionIssued" class="p-6 hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Issued Books</h2>
                        <div class="flex">
                            <div class="relative mr-2">
                                <input type="text" placeholder="Search issued books..." class="px-4 py-2 border-2 border-black nb-input">
                            </div>
                            <button class="bg-green-300 px-4 py-2 font-bold nb-button">
                                <i class="bi bi-plus-lg mr-1"></i> Issue New Book
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto border-2 border-black bg-white">
                        <table class="min-w-full">
                            <thead class="bg-gray-100 border-b-2 border-black">
                                <tr>
                                    <th class="py-3 px-4 text-left">Book Title</th>
                                    <th class="py-3 px-4 text-left">Student</th>
                                    <th class="py-3 px-4 text-left">Issue Date</th>
                                    <th class="py-3 px-4 text-left">Due Date</th>
                                    <th class="py-3 px-4 text-left">Status</th>
                                    <th class="py-3 px-4 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200" id="adminIssuedList">
                                <tr>
                                    <td class="py-3 px-4">Power Electronics</td>
                                    <td class="py-3 px-4">Maria Rodriguez (EE202)</td>
                                    <td class="py-3 px-4">May 10, 2023</td>
                                    <td class="py-3 px-4">Jun 7, 2023</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-red-100 border border-red-800 text-red-800 text-xs font-semibold">
                                            Overdue
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-green-200 px-2 py-1 mr-1 text-sm border border-black">
                                            Return
                                        </button>
                                        <button class="bg-blue-200 px-2 py-1 text-sm border border-black">
                                            Extend
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">Fundamentals of Electric Circuits</td>
                                    <td class="py-3 px-4">Maria Rodriguez (EE202)</td>
                                    <td class="py-3 px-4">May 1, 2023</td>
                                    <td class="py-3 px-4">May 29, 2023</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-green-200 px-2 py-1 mr-1 text-sm border border-black">
                                            Return
                                        </button>
                                        <button class="bg-blue-200 px-2 py-1 text-sm border border-black">
                                            Extend
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">Introduction to Artificial Intelligence</td>
                                    <td class="py-3 px-4">Maria Rodriguez (EE202)</td>
                                    <td class="py-3 px-4">Apr 25, 2023</td>
                                    <td class="py-3 px-4">May 23, 2023</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-green-200 px-2 py-1 mr-1 text-sm border border-black">
                                            Return
                                        </button>
                                        <button class="bg-blue-200 px-2 py-1 text-sm border border-black">
                                            Extend
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">Calculus: Early Transcendentals</td>
                                    <td class="py-3 px-4">David Chen (ME103)</td>
                                    <td class="py-3 px-4">May 5, 2023</td>
                                    <td class="py-3 px-4">Jun 2, 2023</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-green-100 border border-green-800 text-green-800 text-xs font-semibold">
                                            Active
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-green-200 px-2 py-1 mr-1 text-sm border border-black">
                                            Return
                                        </button>
                                        <button class="bg-blue-200 px-2 py-1 text-sm border border-black">
                                            Extend
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="py-3 px-4">Organic Chemistry</td>
                                    <td class="py-3 px-4">James Wilson (CH104)</td>
                                    <td class="py-3 px-4">May 3, 2023</td>
                                    <td class="py-3 px-4">May 31, 2023</td>
                                    <td class="py-3 px-4">
                                        <span class="inline-block px-2 py-1 bg-red-100 border border-red-800 text-red-800 text-xs font-semibold">
                                            Overdue
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        <button class="bg-green-200 px-2 py-1 mr-1 text-sm border border-black">
                                            Return
                                        </button>
                                        <button class="bg-blue-200 px-2 py-1 text-sm border border-black">
                                            Extend
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="min-h-screen hidden bg-gray-50">
        <!-- Navigation Bar -->
        <nav class="bg-green-300 border-b-4 border-black">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-3">
                    <div class="flex items-center space-x-4">
                        <a href="#" class="font-bold text-xl flex items-center">
                            <i class="bi bi-book-half mr-2 text-2xl"></i>
                            <span class="bg-white px-2 py-1 border-2 border-black">College Library</span>
                        </a>
                        
                        <div class="hidden md:flex items-center space-x-1">
                            <a href="#" class="py-2 px-3 font-medium hover:bg-yellow-200 border border-black" onclick="showSection('home')">
                                <i class="bi bi-house-door mr-1"></i> Home
                            </a>
                            <a href="#" class="py-2 px-3 font-medium hover:bg-yellow-200 border border-black" onclick="showSection('search')">
                                <i class="bi bi-search mr-1"></i> Search
                            </a>
                            <a href="#" class="py-2 px-3 font-medium hover:bg-yellow-200 border border-black" onclick="showSection('issued')">
                                <i class="bi bi-journal-bookmark mr-1"></i> My Books
                            </a>
                            <a href="#" class="py-2 px-3 font-medium hover:bg-yellow-200 border border-black" onclick="showSection('chatbot')">
                                <i class="bi bi-chat-square-text mr-1"></i> Assistant
                            </a>
                            <a href="#" class="py-2 px-3 font-medium hover:bg-yellow-200 border border-black" onclick="showSection('exams')">
                                <i class="bi bi-file-earmark-text mr-1"></i> Exam Papers
                            </a>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <div id="studentInfo" class="hidden md:block text-sm bg-white py-1 px-3 border-2 border-black">
                            <span id="studentName" class="font-medium">Student Name</span>
                            <span class="mx-1">|</span>
                            <span id="studentDept" class="text-gray-700">Department</span>
                        </div>
                        
                        <button onclick="logout()" class="flex items-center justify-center p-2 border-2 border-black hover:bg-red-200" title="Logout">
                            <i class="bi bi-box-arrow-right text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div class="md:hidden border-t-2 border-black">
                <div class="flex justify-between">
                    <a href="#" class="flex-1 text-center py-2 border-r border-black" onclick="showSection('home')">
                        <i class="bi bi-house-door block mx-auto text-lg"></i>
                        <span class="text-xs">Home</span>
                    </a>
                    <a href="#" class="flex-1 text-center py-2 border-r border-black" onclick="showSection('search')">
                        <i class="bi bi-search block mx-auto text-lg"></i>
                        <span class="text-xs">Search</span>
                    </a>
                    <a href="#" class="flex-1 text-center py-2 border-r border-black" onclick="showSection('issued')">
                        <i class="bi bi-journal-bookmark block mx-auto text-lg"></i>
                        <span class="text-xs">My Books</span>
                    </a>
                    <a href="#" class="flex-1 text-center py-2 border-r border-black" onclick="showSection('chatbot')">
                        <i class="bi bi-chat-square-text block mx-auto text-lg"></i>
                        <span class="text-xs">Assistant</span>
                    </a>
                    <a href="#" class="flex-1 text-center py-2" onclick="showSection('exams')">
                        <i class="bi bi-file-earmark-text block mx-auto text-lg"></i>
                        <span class="text-xs">Exams</span>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="container mx-auto p-4">
            <!-- Home Section -->
            <section id="homeSection" class="space-y-6">
                <!-- Welcome Banner -->
                <div class="bg-gradient-to-r from-green-300 to-blue-300 nb-card p-6">
                    <div class="flex flex-col md:flex-row justify-between items-center">
                        <div class="mb-4 md:mb-0">
                            <h2 class="text-2xl font-bold" id="welcomeMessage">Welcome to the Library</h2>
                            <p class="opacity-90 mt-1" id="libraryHours">Library Hours: 8:00 AM - 10:00 PM (Mon-Sat)</p>
                        </div>
                        <div class="flex space-x-3">
                            <a href="#" onclick="showSection('search')" class="bg-white nb-button px-4 py-2 font-bold flex items-center">
                                <i class="bi bi-search mr-1"></i> Find Books
                            </a>
                            <a href="#" onclick="showSection('chatbot')" class="bg-yellow-300 nb-button px-4 py-2 font-bold flex items-center">
                                <i class="bi bi-chat-dots mr-1"></i> Ask Assistant
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Department Books -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <div id="departmentIconContainer" class="department-icon bg-blue-100 text-blue-700">
                            <i class="bi bi-laptop"></i>
                        </div>
                        <span id="departmentBooksTitle">Your Department Books</span>
                    </h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="departmentBooks">
                        <!-- Department books will be loaded here -->
                        <div class="animate-pulse">
                            <div class="bg-gray-200 nb-card h-64 mb-2"></div>
                            <div class="h-5 bg-gray-200 border-2 border-black rounded w-3/4"></div>
                            <div class="h-4 bg-gray-200 border-2 border-black rounded w-1/2 mt-2"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 nb-card h-64 mb-2"></div>
                            <div class="h-5 bg-gray-200 border-2 border-black rounded w-3/4"></div>
                            <div class="h-4 bg-gray-200 border-2 border-black rounded w-1/2 mt-2"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 nb-card h-64 mb-2"></div>
                            <div class="h-5 bg-gray-200 border-2 border-black rounded w-3/4"></div>
                            <div class="h-4 bg-gray-200 border-2 border-black rounded w-1/2 mt-2"></div>
                        </div>
                        <div class="animate-pulse">
                            <div class="bg-gray-200 nb-card h-64 mb-2"></div>
                            <div class="h-5 bg-gray-200 border-2 border-black rounded w-3/4"></div>
                            <div class="h-4 bg-gray-200 border-2 border-black rounded w-1/2 mt-2"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Recommended For You -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <div class="department-icon bg-yellow-200 text-yellow-700">
                            <i class="bi bi-star-fill"></i>
                        </div>
                        Recommended For You
                    </h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="recommendedBooks">
                        <!-- Recommended books will be loaded here -->
                    </div>
                </div>
                
                <!-- New Arrivals -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <div class="department-icon bg-purple-200 text-purple-700">
                            <i class="bi bi-lightning-charge-fill"></i>
                        </div>
                        New Arrivals
                    </h2>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="newArrivalsBooks">
                        <!-- New arrivals will be loaded here -->
                    </div>
                </div>
                
                <!-- Library Events -->
                <div class="nb-card bg-white p-5">
                    <h2 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                        <div class="department-icon bg-pink-200 text-pink-700">
                            <i class="bi bi-calendar-event"></i>
                        </div>
                        Upcoming Library Events
                    </h2>
                    
                    <div class="space-y-3">
                        <div class="flex items-start border-l-4 border-indigo-500 pl-3 py-2">
                            <div class="bg-indigo-100 text-indigo-700 p-2 text-center min-w-[60px] border-2 border-black">
                                <p class="font-bold">23</p>
                                <p class="text-xs">May</p>
                            </div>
                            <div class="ml-3">
                                <h3 class="font-medium">Book Reading Session: Modern AI Applications</h3>
                                <p class="text-gray-600 text-sm">2:00 PM - 4:00 PM, Main Hall</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start border-l-4 border-green-500 pl-3 py-2">
                            <div class="bg-green-100 text-green-700 p-2 text-center min-w-[60px] border-2 border-black">
                                <p class="font-bold">28</p>
                                <p class="text-xs">May</p>
                            </div>
                            <div class="ml-3">
                                <h3 class="font-medium">Workshop: Research Paper Writing</h3>
                                <p class="text-gray-600 text-sm">10:00 AM - 12:30 PM, Seminar Room 2</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start border-l-4 border-amber-500 pl-3 py-2">
                            <div class="bg-amber-100 text-amber-700 p-2 text-center min-w-[60px] border-2 border-black">
                                <p class="font-bold">02</p>
                                <p class="text-xs">Jun</p>
                            </div>
                            <div class="ml-3">
                                <h3 class="font-medium">Author Meet: Dr. James Willson on Quantum Computing</h3>
                                <p class="text-gray-600 text-sm">3:00 PM - 5:00 PM, Conference Hall</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Search Section -->
            <section id="searchSection" class="hidden space-y-6">
                <div class="nb-card bg-white p-5">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Search Books</h2>
                    
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-grow relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="bi bi-search text-gray-400"></i>
                            </div>
                            <input type="text" id="searchInput" placeholder="Search by title, author, subject or ISBN" 
                                   class="block w-full pl-10 pr-3 py-3 nb-input focus:outline-none">
                        </div>
                        
                        <div class="flex space-x-2">
                            <select id="searchFilter" class="nb-select px-3 py-3">
                                <option value="all">All Categories</option>
                                <option value="title">Title</option>
                                <option value="author">Author</option>
                                <option value="subject">Subject</option>
                                <option value="isbn">ISBN</option>
                            </select>
                            
                            <button onclick="searchBooks()" class="bg-green-300 py-3 px-4 font-bold nb-button flex items-center">
                                <i class="bi bi-search mr-1"></i> Search
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex flex-wrap gap-2 mt-3">
                        <button onclick="setQuickFilter(this, 'computer science')" class="px-3 py-1 text-sm bg-blue-200 hover:bg-blue-300 border border-black">Computer Science</button>
                        <button onclick="setQuickFilter(this, 'engineering')" class="px-3 py-1 text-sm bg-yellow-200 hover:bg-yellow-300 border border-black">Engineering</button>
                        <button onclick="setQuickFilter(this, 'mathematics')" class="px-3 py-1 text-sm bg-green-200 hover:bg-green-300 border border-black">Mathematics</button>
                        <button onclick="setQuickFilter(this, 'physics')" class="px-3 py-1 text-sm bg-indigo-200 hover:bg-indigo-300 border border-black">Physics</button>
                        <button onclick="setQuickFilter(this, 'chemistry')" class="px-3 py-1 text-sm bg-purple-200 hover:bg-purple-300 border border-black">Chemistry</button>
                        <button onclick="setQuickFilter(this, 'biology')" class="px-3 py-1 text-sm bg-pink-200 hover:bg-pink-300 border border-black">Biology</button>
                        <button onclick="setQuickFilter(this, 'literature')" class="px-3 py-1 text-sm bg-amber-200 hover:bg-amber-300 border border-black">Literature</button>
                        <button onclick="setQuickFilter(this, 'history')" class="px-3 py-1 text-sm bg-red-200 hover:bg-red-300 border border-black">History</button>
                    </div>
                </div>
                
                <div id="searchResults" class="hidden space-y-4">
                    <h2 class="text-xl font-bold text-gray-800 flex items-center">
                        <div class="department-icon bg-green-200 text-green-700">
                            <i class="bi bi-list-ul"></i>
                        </div>
                        Search Results (<span id="resultCount">0</span>)
                    </h2>
                    
                    <div id="noResults" class="hidden bg-gray-50 p-8 text-center nb-card">
                        <i class="bi bi-search text-5xl mb-2 block"></i>
                        <h3 class="text-lg font-medium mb-1">No results found</h3>
                        <p>Try different keywords or browse by category</p>
                    </div>
                    
                    <div id="searchResultsList" class="grid grid-cols-1 gap-4">
                        <!-- Search results will be loaded here -->
                    </div>
                </div>
            </section>
            
            <!-- Issued Books Section -->
            <section id="issuedSection" class="hidden space-y-6">
                <div class="nb-card bg-white p-5">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">My Issued Books</h2>
                    
                    <div id="noIssuedBooks" class="hidden bg-gray-50 p-8 text-center nb-card">
                        <i class="bi bi-journal-x text-5xl mb-2 block"></i>
                        <h3 class="text-lg font-medium mb-1">No books issued</h3>
                        <p>You currently don't have any books checked out</p>
                        <button onclick="showSection('search')" class="mt-3 bg-green-300 py-2 px-4 font-bold nb-button inline-flex items-center">
                            <i class="bi bi-search mr-1"></i> Browse Books
                        </button>
                    </div>
                    
                    <div id="issuedBooksList" class="space-y-4">
                        <!-- Issued books will be loaded here -->
                    </div>
                </div>
                
                <div class="nb-card bg-white p-5">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Borrowing History</h2>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border-2 border-black">
                            <thead class="bg-gray-100 border-b-2 border-black">
                                <tr>
                                    <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Book Title</th>
                                    <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Issued Date</th>
                                    <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Return Date</th>
                                    <th class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200" id="historyList">
                                <!-- Borrowing history will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- Chatbot Section -->
            <section id="chatbotSection" class="hidden space-y-6">
                <div class="nb-card bg-white h-[calc(100vh-150px)] flex flex-col">
                    <div class="p-4 bg-green-300 border-b-3 border-black">
                        <h2 class="text-xl font-bold flex items-center">
                            <i class="bi bi-robot mr-2"></i>
                            Library Book Assistant
                        </h2>
                        <p class="text-sm text-gray-700">Ask for book recommendations & information</p>
                    </div>
                    
                    <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-2">
                        <div class="chat-message bot-message">
                            <p> Hello! I'm your Library Assistant. I can help you find books, provide recommendations based on your interests, or answer questions about library services.</p>
                        </div>
                        <div class="chat-message bot-message">
                            <p>What would you like help with today? Try asking:</p>
                            <ul class="list-disc ml-5 mt-1">
                                <li>Recommend books about [topic]</li>
                                <li>Find books similar to [book title]</li>
                                <li>Show books from [author]</li>
                                <li>What should I read for [subject]?</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="p-3 border-t-3 border-black flex gap-2">
                        <input type="text" id="chatInput" placeholder="Type your message..." 
                               class="flex-1 nb-input px-3 py-2 focus:outline-none">
                        <button onclick="sendMessage()" class="bg-green-300 py-3 px-4 font-bold nb-button flex items-center">
                            <i class="bi bi-send mr-1"></i> Send
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Exam Papers Section -->
            <section id="examsSection" class="hidden space-y-6">
                <div class="nb-card bg-white p-5">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Previous Year Exam Papers</h2>
                    
                    <div class="mb-6 space-y-2">
                        <p class="text-gray-700">Find previous year question papers and study materials for competitive exams.</p>
                        <div class="flex flex-col md:flex-row md:items-center space-y-2 md:space-y-0 md:space-x-4">
                            <div>
                                <label class="text-sm font-medium text-gray-700 block mb-1">Exam Type:</label>
                                <select class="nb-select py-2 px-3 w-full md:w-auto">
                                    <option value="all">All Exams</option>
                                    <option value="jee">JEE (Mains & Advanced)</option>
                                    <option value="gate">GATE</option>
                                    <option value="net">UGC NET</option>
                                    <option value="cat">CAT</option>
                                    <option value="gre">GRE</option>
                                    <option value="neet">NEET</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-700 block mb-1">Year:</label>
                                <select class="nb-select py-2 px-3 w-full md:w-auto">
                                    <option value="all">All Years</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                    <option value="2020">2020</option>
                                    <option value="2019">2019</option>
                                </select>
                            </div>
                            <div class="md:self-end">
                                <button class="bg-green-300 py-2 px-4 font-bold nb-button flex items-center w-full md:w-auto justify-center">
                                    <i class="bi bi-search mr-1"></i> Search
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- JEE -->
                        <div class="border-2 border-black p-4 bg-blue-100 hover:bg-blue-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">JEE Mains 2023</h3>
                                    <p class="text-sm text-gray-700">January Session</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Complete question paper with solutions and detailed analysis.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Physics</span>
                                    <span class="bg-white px-2 py-1 border border-black">Chemistry</span>
                                    <span class="bg-white px-2 py-1 border border-black">Mathematics</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 1,245 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                        
                        <div class="border-2 border-black p-4 bg-blue-100 hover:bg-blue-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">JEE Advanced 2022</h3>
                                    <p class="text-sm text-gray-700">Paper 1 & 2</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Full papers with detailed solutions and answer keys.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Physics</span>
                                    <span class="bg-white px-2 py-1 border border-black">Chemistry</span>
                                    <span class="bg-white px-2 py-1 border border-black">Mathematics</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 2,583 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                        
                        <!-- GATE -->
                        <div class="border-2 border-black p-4 bg-purple-100 hover:bg-purple-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">GATE 2023 - CSE</h3>
                                    <p class="text-sm text-gray-700">Computer Science</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Complete paper with solutions and detailed explanations.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Algorithms</span>
                                    <span class="bg-white px-2 py-1 border border-black">Data Structures</span>
                                    <span class="bg-white px-2 py-1 border border-black">OS</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 1,892 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                        
                        <div class="border-2 border-black p-4 bg-purple-100 hover:bg-purple-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">GATE 2022 - ECE</h3>
                                    <p class="text-sm text-gray-700">Electronics & Communication</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Full paper with detailed solutions and answer keys.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Signals</span>
                                    <span class="bg-white px-2 py-1 border border-black">Communications</span>
                                    <span class="bg-white px-2 py-1 border border-black">Networks</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 1,378 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                        
                        <!-- UGC NET -->
                        <div class="border-2 border-black p-4 bg-yellow-100 hover:bg-yellow-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">UGC NET 2022</h3>
                                    <p class="text-sm text-gray-700">Computer Science</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Paper I & II with detailed solutions and explanations.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Teaching</span>
                                    <span class="bg-white px-2 py-1 border border-black">Research</span>
                                    <span class="bg-white px-2 py-1 border border-black">Aptitude</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 943 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                        
                        <!-- NEET -->
                        <div class="border-2 border-black p-4 bg-green-100 hover:bg-green-200 flex flex-col">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-bold">NEET 2023</h3>
                                    <p class="text-sm text-gray-700">Medical Entrance</p>
                                </div>
                                <div class="bg-white p-1 border border-black">
                                    <i class="bi bi-file-earmark-pdf text-xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <p class="text-sm mb-3">Full paper with detailed solutions and answer keys.</p>
                                <div class="flex gap-2 text-xs">
                                    <span class="bg-white px-2 py-1 border border-black">Biology</span>
                                    <span class="bg-white px-2 py-1 border border-black">Physics</span>
                                    <span class="bg-white px-2 py-1 border border-black">Chemistry</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-black flex justify-between items-center">
                                <span class="text-xs">Downloaded: 1,795 times</span>
                                <a href="#" class="bg-green-300 px-3 py-1 text-sm font-bold border-2 border-black flex items-center">
                                    <i class="bi bi-download mr-1"></i> Download
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="text-lg font-bold mb-4">Study Materials & Resources</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <a href="#" class="bg-blue-100 nb-card p-4 hover:bg-blue-200 flex items-center">
                                <div class="mr-3 bg-white p-2 border-2 border-black">
                                    <i class="bi bi-book text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold">Study Guides</h4>
                                    <p class="text-sm">Topic-wise preparation</p>
                                </div>
                            </a>
                            <a href="#" class="bg-green-100 nb-card p-4 hover:bg-green-200 flex items-center">
                                <div class="mr-3 bg-white p-2 border-2 border-black">
                                    <i class="bi bi-clock-history text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold">Mock Tests</h4>
                                    <p class="text-sm">Practice with timers</p>
                                </div>
                            </a>
                            <a href="#" class="bg-yellow-100 nb-card p-4 hover:bg-yellow-200 flex items-center">
                                <div class="mr-3 bg-white p-2 border-2 border-black">
                                    <i class="bi bi-graph-up text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold">Analysis Tools</h4>
                                    <p class="text-sm">Performance metrics</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Book Detail Modal -->
            <div id="bookDetailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white nb-card w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                    <div class="p-5 border-b-2 border-black flex justify-between items-center sticky top-0 bg-white">
                        <h2 class="text-xl font-bold text-gray-800" id="modalTitle">Book Details</h2>
                        <button onclick="closeBookDetail()" class="text-gray-500 hover:text-gray-700">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    
                    <div class="p-5" id="modalContent">
                        <!-- Book details will be loaded here -->
                    </div>
                    
                    <div class="p-4 border-t-2 border-black flex justify-end space-x-2 bg-gray-50">
                        <button onclick="closeBookDetail()" class="px-4 py-2 border-2 border-black text-black font-bold bg-white hover:bg-gray-100">
                            Close
                        </button>
                        <button id="reserveButton" class="px-4 py-2 bg-green-300 text-black font-bold nb-button">
                            <i class="bi bi-bookmark-plus mr-1"></i>
                            Reserve Book
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let allBooks = [];
        let departmentBooks = [];
        let recommendedBooks = [];
        let issuedBooks = [];
        let borrowHistory = [];
        let currentBookDetail = null;

        // Sample test accounts
        const testAccounts = [
            {
                id: "CS101",
                name: "Alex Johnson",
                department: "computer-science",
                issuedBooks: [],
                history: [
                    { title: "Introduction to Algorithms", issuedDate: "2023-02-15", returnDate: "2023-03-15", status: "Returned" },
                    { title: "Clean Code", issuedDate: "2023-01-10", returnDate: "2023-02-10", status: "Returned" }
                ]
            },
            {
                id: "EE202",
                name: "Maria Rodriguez",
                department: "electrical-engineering",
                issuedBooks: [
                    { id: "EE001", title: "Fundamentals of Electric Circuits", author: "Charles Alexander", isbn: "9780078028229", issueDate: "2023-05-01", dueDate: "2023-05-29", category: "electrical-engineering" },
                    { id: "EE007", title: "Power Electronics", author: "Daniel Hart", isbn: "9780073380674", issueDate: "2023-05-10", dueDate: "2023-06-07", category: "electrical-engineering" },
                    { id: "CS020", title: "Introduction to Artificial Intelligence", author: "Stuart Russell", isbn: "9780134610993", issueDate: "2023-04-25", dueDate: "2023-05-23", category: "computer-science" }
                ],
                history: [
                    { title: "Digital Signal Processing", issuedDate: "2023-03-05", returnDate: "2023-04-05", status: "Returned" },
                    { title: "Microelectronic Circuits", issuedDate: "2023-02-20", returnDate: "2023-03-20", status: "Returned" },
                    { title: "Control Systems Engineering", issuedDate: "2023-01-15", returnDate: "2023-02-15", status: "Returned" },
                    { title: "Embedded Systems", issuedDate: "2022-12-10", returnDate: "2023-01-10", status: "Returned" }
                ]
            }
        ];

        // Sample books data - reusing from original code
        const booksData = [
            // Computer Science Books
            { id: "CS001", title: "Introduction to Algorithms", author: "Thomas H. Cormen", isbn: "9780262033848", publisher: "MIT Press", year: "2009", description: "This book covers a broad range of algorithms in depth, yet makes their design and analysis accessible to all levels of readers.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,algorithms" },
            { id: "CS002", title: "Clean Code", author: "Robert C. Martin", isbn: "9780132350884", publisher: "Prentice Hall", year: "2008", description: "Even bad code can function. But if code isn't clean, it can bring a development organization to its knees. This book presents the principles, patterns, and practices of writing clean code.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,programming" },
            { id: "CS003", title: "Design Patterns", author: "Erich Gamma", isbn: "9780201633610", publisher: "Addison-Wesley", year: "1994", description: "A classic book on design patterns that captures solutions to commonly occurring software design problems.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,patterns" },
            { id: "CS004", title: "Database System Concepts", author: "Abraham Silberschatz", isbn: "9780073523323", publisher: "McGraw-Hill", year: "2010", description: "This book provides a comprehensive introduction to database systems, covering the fundamentals of database design and implementation.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,database" },
            
            // Electrical Engineering Books
            { id: "EE001", title: "Fundamentals of Electric Circuits", author: "Charles Alexander", isbn: "9780078028229", publisher: "McGraw-Hill", year: "2012", description: "This book is designed to introduce students to the basic concepts of electric circuits and provide a strong foundation in the basics of circuit theory.", category: "electrical-engineering", available: false, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,circuits" },
            { id: "EE002", title: "Microelectronic Circuits", author: "Adel S. Sedra", isbn: "9780199339143", publisher: "Oxford University Press", year: "2014", description: "The text provides a comprehensive introduction to microelectronic circuit analysis and design.", category: "electrical-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,electronics" },
            { id: "EE003", title: "Control Systems Engineering", author: "Norman S. Nise", isbn: "9781118170519", publisher: "Wiley", year: "2015", description: "This book provides a practical approach to control systems engineering with an emphasis on problem-solving techniques.", category: "electrical-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,control" },
            { id: "EE004", title: "Power System Analysis", author: "John J. Grainger", isbn: "9780070612938", publisher: "McGraw-Hill", year: "1994", description: "This book covers the concepts of power system analysis, stability, and protection.", category: "electrical-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,power" },
            
            // Mechanical Engineering
            { id: "ME001", title: "Fundamentals of Thermodynamics", author: "Michael J. Moran", isbn: "9780470917688", publisher: "Wiley", year: "2010", description: "A comprehensive introduction to the theory and application of thermodynamics for engineering students.", category: "mechanical-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,thermodynamics" },
            { id: "ME002", title: "Shigley's Mechanical Engineering Design", author: "Richard Budynas", isbn: "9780073398204", publisher: "McGraw-Hill", year: "2014", description: "This book covers the fundamentals of machine component design with emphasis on practical design considerations.", category: "mechanical-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,mechanical" },
            
            // Civil Engineering
            { id: "CE001", title: "Reinforced Concrete Design", author: "Chu-Kia Wang", isbn: "9780471262862", publisher: "Wiley", year: "2006", description: "A thorough introduction to the principles of reinforced concrete design and analysis.", category: "civil-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,concrete" },
            { id: "CE002", title: "Structural Analysis", author: "Russell C. Hibbeler", isbn: "9780133942842", publisher: "Pearson", year: "2014", description: "This book provides a comprehensive, well-illustrated introduction to the theory and application of structural analysis.", category: "civil-engineering", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,structure" },
            
            // Chemistry
            { id: "CH001", title: "Organic Chemistry", author: "Paula Yurkanis Bruice", isbn: "9780134042282", publisher: "Pearson", year: "2016", description: "A comprehensive guide to understanding the structure, properties, and reactions of organic compounds.", category: "chemistry", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,chemistry" },
            { id: "CH002", title: "Physical Chemistry", author: "Peter Atkins", isbn: "9780199697403", publisher: "Oxford University Press", year: "2014", description: "Covers the fundamental principles of physical chemistry including thermodynamics, kinetics, and quantum mechanics.", category: "chemistry", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,physical,chemistry" },
            
            // Physics
            { id: "PH001", title: "University Physics", author: "Hugh D. Young", isbn: "9780321696861", publisher: "Pearson", year: "2015", description: "A comprehensive and detailed text covering the core topics in physics with emphasis on practical applications.", category: "physics", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,physics" },
            { id: "PH002", title: "Introduction to Quantum Mechanics", author: "David J. Griffiths", isbn: "9780131118928", publisher: "Pearson", year: "2004", description: "A clear and accessible introduction to the principles of quantum mechanics.", category: "physics", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,quantum" },
            
            // Mathematics
            { id: "MA001", title: "Calculus: Early Transcendentals", author: "James Stewart", isbn: "9781285741550", publisher: "Cengage Learning", year: "2015", description: "A comprehensive introduction to single and multivariable calculus with a focus on applications.", category: "mathematics", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,calculus" },
            { id: "MA002", title: "Linear Algebra and Its Applications", author: "David C. Lay", isbn: "9780321385178", publisher: "Pearson", year: "2011", description: "A modern introduction to linear algebra with a focus on applications in engineering and science.", category: "mathematics", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,algebra" },
            
            // Biology
            { id: "BI001", title: "Campbell Biology", author: "Lisa A. Urry", isbn: "9780134093413", publisher: "Pearson", year: "2016", description: "A comprehensive introduction to biology covering cellular processes, genetics, evolution, and ecology.", category: "biology", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,biology" },
            { id: "BI002", title: "Molecular Biology of the Cell", author: "Bruce Alberts", isbn: "9780815344322", publisher: "Garland Science", year: "2014", description: "A detailed guide to the molecular mechanisms of cellular processes and their regulation.", category: "biology", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,molecular,biology" },
            
            // Literature
            { id: "LI001", title: "The Norton Anthology of English Literature", author: "Stephen Greenblatt", isbn: "9780393912470", publisher: "W. W. Norton & Company", year: "2012", description: "A comprehensive collection of English literature from the Middle Ages to the twenty-first century.", category: "literature", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?book,literature" },
            { id: "LI002", title: "Literary Theory: An Introduction", author: "Terry Eagleton", isbn: "9780816654475", publisher: "University of Minnesota Press", year: "2008", description: "A critical introduction to the major traditions in literary theory and criticism.", category: "literature", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?book,theory" },
            
            // History
            { id: "HI001", title: "A People's History of the United States", author: "Howard Zinn", isbn: "9780062397348", publisher: "Harper Perennial", year: "2015", description: "A history of the United States from the perspective of ordinary people who have been traditionally marginalized.", category: "history", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?book,history" },
            { id: "HI002", title: "Guns, Germs, and Steel", author: "Jared Diamond", isbn: "9780393317558", publisher: "W. W. Norton & Company", year: "1999", description: "An examination of the factors that shaped the modern world and led to the dominance of Western civilization.", category: "history", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?book,history,civilization" },
            
            // Additional books for recommendation and variety
            { id: "CS020", title: "Introduction to Artificial Intelligence", author: "Stuart Russell", isbn: "9780134610993", publisher: "Pearson", year: "2020", description: "A comprehensive introduction to the theory and practice of artificial intelligence.", category: "computer-science", available: false, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,ai" },
            { id: "CS021", title: "Deep Learning", author: "Ian Goodfellow", isbn: "9780262035613", publisher: "MIT Press", year: "2016", description: "The definitive textbook on deep learning, covering mathematical and conceptual background, deep learning techniques, and applications.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,deep,learning" },
            { id: "CS022", title: "Computer Networking: A Top-Down Approach", author: "James Kurose", isbn: "9780133594140", publisher: "Pearson", year: "2016", description: "A comprehensive introduction to computer networking covering the principles, protocols, and architectures of modern networks.", category: "computer-science", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,networking" },
            { id: "EE007", title: "Power Electronics", author: "Daniel Hart", isbn: "9780073380674", publisher: "McGraw-Hill", year: "2010", description: "A comprehensive introduction to power electronic circuits, devices, and applications.", category: "electrical-engineering", available: false, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,electronics,power" },
            { id: "MA010", title: "Differential Equations", author: "Dennis G. Zill", isbn: "9781111827052", publisher: "Cengage Learning", year: "2012", description: "A clear and comprehensive introduction to ordinary differential equations and their applications.", category: "mathematics", available: true, coverUrl: "https://source.unsplash.com/random/300x450/?textbook,mathematics,differential" }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event listeners for the original app
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Set up event listeners for the admin
            document.getElementById('adminLoginForm').addEventListener('submit', handleAdminLogin);
            
            // Initialize book data
            allBooks = booksData;
            
            // Load featured books on public home page
            loadFeaturedBooks();
            
            // Preload admin books list
            loadAdminBooksList();
        });

        // Public Page Functions
        function loadFeaturedBooks() {
            const container = document.getElementById('featuredBooksList');
            
            // Get random featured books
            const featuredBooks = [...allBooks]
                .sort(() => 0.5 - Math.random())
                .slice(0, 4);
                
            container.innerHTML = '';
            
            featuredBooks.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'nb-card bg-white p-4 hover:bg-gray-50 transition-all';
                
                bookCard.innerHTML = `
                    <div class="relative">
                        <img src="${book.coverUrl}" alt="${book.title}" class="w-full h-64 object-cover book-cover mb-3">
                        ${!book.available ? '<div class="absolute top-2 right-2 bg-red-400 text-black font-bold px-2 py-1 border-2 border-black">Unavailable</div>' : ''}
                    </div>
                    <h3 class="font-bold mb-1 line-clamp-1">${book.title}</h3>
                    <p class="text-gray-600 text-sm mb-2">${book.author}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs bg-blue-100 px-2 py-1 border border-black">${formatDepartment(book.category)}</span>
                        <button onclick="showPublicBookDetail('${book.id}')" class="text-sm bg-yellow-200 px-2 py-1 border border-black hover:bg-yellow-300">
                            Details
                        </button>
                    </div>
                `;
                
                container.appendChild(bookCard);
            });
        }

        function publicSearch() {
            const searchTerm = document.getElementById('publicSearchInput').value.trim().toLowerCase();
            
            if (!searchTerm) {
                showNotification('Please enter a search term', 'error');
                return;
            }
            
            let results = allBooks.filter(book => 
                book.title.toLowerCase().includes(searchTerm) ||
                book.author.toLowerCase().includes(searchTerm) ||
                book.category.toLowerCase().includes(searchTerm) ||
                book.isbn.toLowerCase().includes(searchTerm) ||
                book.description.toLowerCase().includes(searchTerm)
            );
            
            displayPublicSearchResults(results, searchTerm);
        }

        function publicQuickFilter(filterTerm) {
            document.getElementById('publicSearchInput').value = filterTerm;
            publicSearch();
        }

        function displayPublicSearchResults(results, searchTerm) {
            const resultsContainer = document.getElementById('publicSearchResultsList');
            const resultsSection = document.getElementById('publicSearchResults');
            const noResultsMessage = document.getElementById('publicNoResults');
            const resultCount = document.getElementById('publicResultCount');
            
            // Hide featured books when showing search results
            document.getElementById('featuredBooks').classList.add('hidden');
            
            resultsContainer.innerHTML = '';
            resultsSection.classList.remove('hidden');
            
            if (results.length === 0) {
                noResultsMessage.classList.remove('hidden');
                resultCount.textContent = '0';
                return;
            }
            
            noResultsMessage.classList.add('hidden');
            resultCount.textContent = results.length;
            
            // Display results as a list
            results.forEach(book => {
                const resultItem = document.createElement('div');
                resultItem.className = 'nb-card bg-white p-4 flex flex-col md:flex-row';
                
                // Highlight the search term in the title and description
                const highlightedTitle = book.title.replace(
                    new RegExp(searchTerm, 'gi'), 
                    match => `<span class="bg-yellow-200">${match}</span>`
                );
                
                const highlightedDescription = book.description.replace(
                    new RegExp(searchTerm, 'gi'), 
                    match => `<span class="bg-yellow-200">${match}</span>`
                );
                
                resultItem.innerHTML = `
                    <div class="md:flex-shrink-0">
                        <img src="${book.coverUrl}" alt="${book.title}" class="h-48 w-full md:w-32 object-cover book-cover">
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-6 flex-grow">
                        <h3 class="text-lg font-bold">${highlightedTitle}</h3>
                        <p class="text-gray-600">by ${book.author}</p>
                        <div class="mt-1 flex items-center">
                            <span class="text-sm ${book.available ? 'book-status-available' : 'book-status-issued'}">
                                <i class="bi ${book.available ? 'bi-circle-fill' : 'bi-dash-circle-fill'}"></i>
                                ${book.available ? 'Available' : 'Checked Out'}
                            </span>
                            <span class="mx-2"></span>
                            <span class="text-sm text-gray-500">ISBN: ${book.isbn}</span>
                        </div>
                        <p class="mt-2 text-gray-700 line-clamp-2">${highlightedDescription}</p>
                        <div class="mt-3">
                            <button onclick="showPublicBookDetail('${book.id}')" class="inline-flex items-center px-3 py-1 text-sm font-medium bg-blue-200 border-2 border-black hover:bg-blue-300">
                                <i class="bi bi-info-circle mr-1"></i> More Info
                            </button>
                            <button onclick="showLoginPage()" class="ml-2 inline-flex items-center px-3 py-1 text-sm font-medium bg-green-200 border-2 border-black hover:bg-green-300">
                                <i class="bi bi-box-arrow-in-right mr-1"></i> Login to Borrow
                            </button>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(resultItem);
            });
        }

        function showPublicBookDetail(bookId) {
            const book = allBooks.find(b => b.id === bookId);
            
            if (!book) return;
            
            // Create a temporary modal just for the public view
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            modal.innerHTML = `
                <div class="bg-white nb-card w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                    <div class="p-5 border-b-2 border-black flex justify-between items-center sticky top-0 bg-white">
                        <h2 class="text-xl font-bold text-gray-800">${book.title}</h2>
                        <button class="text-gray-500 hover:text-gray-700">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    
                    <div class="p-5">
                        <div class="flex flex-col md:flex-row">
                            <div class="md:flex-shrink-0">
                                <img src="${book.coverUrl}" alt="${book.title}" class="h-64 w-48 object-cover book-cover">
                            </div>
                            <div class="mt-4 md:mt-0 md:ml-6">
                                <h3 class="text-lg font-medium">${book.title}</h3>
                                <p class="text-gray-600">by ${book.author}</p>
                                
                                <div class="mt-3 space-y-2">
                                    <p><span class="font-medium">ISBN:</span> ${book.isbn}</p>
                                    <p><span class="font-medium">Publisher:</span> ${book.publisher}, ${book.year}</p>
                                    <p><span class="font-medium">Category:</span> ${formatDepartment(book.category)}</p>
                                    <p class="flex items-center">
                                        <span class="font-medium mr-2">Status:</span>
                                        <span class="${book.available ? 'text-green-600' : 'text-red-600'} flex items-center">
                                            <i class="bi ${book.available ? 'bi-circle-fill' : 'bi-dash-circle-fill'} mr-1"></i>
                                            ${book.available ? 'Available' : 'Checked Out'}
                                        </span>
                                    </p>
                                </div>
                                
                                <div class="mt-4 pt-3 border-t">
                                    <h4 class="font-medium mb-1">Description</h4>
                                    <p class="text-gray-700">${book.description}</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 pt-4 border-t-2 border-black text-center">
                            <p class="mb-3">To borrow this book, please login to your student account</p>
                            <button class="bg-green-300 py-2 px-4 font-bold nb-button inline-flex items-center">
                                <i class="bi bi-box-arrow-in-right mr-1"></i> Student Login
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-4 border-t-2 border-black flex justify-end space-x-2 bg-gray-50">
                        <button class="px-4 py-2 border-2 border-black text-black font-bold bg-white hover:bg-gray-100">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners
            modal.querySelector('.bi-x-lg').parentElement.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.querySelector('button:last-child').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.querySelector('.bg-green-300.py-2').addEventListener('click', () => {
                document.body.removeChild(modal);
                showLoginPage();
            });
            
            // Show modal
            document.body.appendChild(modal);
        }

        function showLoginPage() {
            document.getElementById('publicHomePage').classList.add('hidden');
            document.getElementById('loginPage').classList.remove('hidden');
        }

        function hideLoginPage() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('publicHomePage').classList.remove('hidden');
        }

        function showAdminLogin() {
            document.getElementById('publicHomePage').classList.add('hidden');
            document.getElementById('adminLoginPage').classList.remove('hidden');
        }

        function hideAdminLogin() {
            document.getElementById('adminLoginPage').classList.add('hidden');
            document.getElementById('publicHomePage').classList.remove('hidden');
        }

        // Admin Functions
        function handleAdminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            if (username === 'admin' && password === 'admin123') {
                document.getElementById('adminLoginPage').classList.add('hidden');
                document.getElementById('adminDashboard').classList.remove('hidden');
                showAdminSection('dashboard');
                
                showNotification('Welcome, Admin!', 'success');
            } else {
                showNotification('Invalid admin credentials', 'error');
            }
        }

        function showAdminSection(section) {
            // Hide all sections
            document.getElementById('adminSectionDashboard').classList.add('hidden');
            document.getElementById('adminSectionStudents').classList.add('hidden');
            document.getElementById('adminSectionBooks').classList.add('hidden');
            document.getElementById('adminSectionIssued').classList.add('hidden');
            
            // Reset all tab styles
            document.getElementById('adminTabDashboard').classList.remove('bg-blue-200');
            document.getElementById('adminTabStudents').classList.remove('bg-blue-200');
            document.getElementById('adminTabBooks').classList.remove('bg-blue-200');
            document.getElementById('adminTabIssued').classList.remove('bg-blue-200');
            
            // Show the selected section
            document.getElementById(`adminSection${section.charAt(0).toUpperCase() + section.slice(1)}`).classList.remove('hidden');
            
            // Highlight the selected tab
            document.getElementById(`adminTab${section.charAt(0).toUpperCase() + section.slice(1)}`).classList.add('bg-blue-200');
        }

        function loadAdminBooksList() {
            const container = document.getElementById('adminBooksList');
            container.innerHTML = '';
            
            // Display first 10 books
            allBooks.slice(0, 10).forEach(book => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td class="py-3 px-4">${book.id}</td>
                    <td class="py-3 px-4">${book.title}</td>
                    <td class="py-3 px-4">${book.author}</td>
                    <td class="py-3 px-4">${formatDepartment(book.category)}</td>
                    <td class="py-3 px-4">
                        <span class="inline-block px-2 py-1 ${book.available ? 'bg-green-100 border border-green-800 text-green-800' : 'bg-red-100 border border-red-800 text-red-800'} text-xs font-semibold">
                            ${book.available ? 'Available' : 'Checked Out'}
                        </span>
                    </td>
                    <td class="py-3 px-4">
                        <button class="bg-blue-200 px-2 py-1 mr-1 text-sm border border-black">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button class="bg-red-200 px-2 py-1 text-sm border border-black">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                `;
                
                container.appendChild(row);
            });
        }

        function logoutAdmin() {
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('publicHomePage').classList.remove('hidden');
            
            // Reset the form
            document.getElementById('adminLoginForm').reset();
            
            showNotification('Admin logged out successfully', 'success');
        }

        // Original App Functions - reusing from original
        function handleLogin(event) {
            event.preventDefault();

            const studentId = document.getElementById('studentId').value;
            const department = document.getElementById('department').value;

            // Find user in test accounts
            const user = testAccounts.find(account => account.id === studentId && account.department === department);
            
            if (user) {
                currentUser = user;
                issuedBooks = user.issuedBooks || [];
                borrowHistory = user.history || [];
                
                // Update UI with user info
                document.getElementById('studentName').textContent = user.name;
                document.getElementById('studentDept').textContent = formatDepartment(user.department);
                document.getElementById('welcomeMessage').textContent = `Welcome, ${user.name}!`;
                
                // Set department icon
                setDepartmentIcon(user.department);
                
                // Load books based on user's department
                loadDepartmentBooks(user.department);
                
                // Load personalized book recommendations
                loadRecommendedBooks();
                
                // Load new arrivals
                loadNewArrivals();
                
                // Hide login page
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('publicHomePage').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                document.getElementById('studentInfo').classList.remove('hidden');
                
                // Show home section by default
                showSection('home');
                
                showNotification(`Welcome, ${user.name}!`, 'success');
            } else {
                showNotification('Invalid student ID or department. Try the test accounts listed below.', 'error');
            }
        }

        function logout() {
            currentUser = null;
            issuedBooks = [];
            borrowHistory = [];
            
            // Show public home page
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('publicHomePage').classList.remove('hidden');
            
            // Reset login form
            document.getElementById('loginForm').reset();
            
            showNotification('Logged out successfully', 'success');
        }

        function showSection(sectionName) {
            // Hide all sections
            document.getElementById('homeSection').classList.add('hidden');
            document.getElementById('searchSection').classList.add('hidden');
            document.getElementById('issuedSection').classList.add('hidden');
            document.getElementById('chatbotSection').classList.add('hidden');
            document.getElementById('examsSection').classList.add('hidden');
            
            // Show the selected section
            document.getElementById(`${sectionName}Section`).classList.remove('hidden');
            
            // Additional section-specific initializations
            if (sectionName === 'issued') {
                displayIssuedBooks();
                displayBorrowHistory();
            }
        }

        // Book Loading Functions
        function loadDepartmentBooks(department) {
            // Filter books by department
            departmentBooks = allBooks.filter(book => book.category === department);
            
            const container = document.getElementById('departmentBooks');
            container.innerHTML = '';
            
            // Update section title
            document.getElementById('departmentBooksTitle').textContent = `${formatDepartment(department)} Books`;
            
            if (departmentBooks.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center p-8 nb-card bg-gray-100">
                        <p class="text-gray-500">No books available for this department.</p>
                    </div>
                `;
                return;
            }
            
            // Display department books
            departmentBooks.forEach(book => {
                container.appendChild(createNeuBrutalismBookCard(book));
            });
        }

        function loadRecommendedBooks() {
            // This would typically be based on user's reading history and AI recommendations
            // For this mock-up, we'll use a combination of books from similar categories 
            // and some popular books from other categories
            
            // Start with books from the same department
            let recommendations = allBooks.filter(book => 
                book.category === currentUser.department && 
                !issuedBooks.some(issued => issued.id === book.id))
                .slice(0, 2);
            
            // Add books from related departments
            const relatedDepartments = getRelatedDepartments(currentUser.department);
            
            relatedDepartments.forEach(dept => {
                const deptBooks = allBooks.filter(book => 
                    book.category === dept && 
                    !issuedBooks.some(issued => issued.id === book.id));
                
                if (deptBooks.length > 0) {
                    // Add 1-2 books from each related department
                    recommendations = recommendations.concat(deptBooks.slice(0, Math.min(2, deptBooks.length)));
                }
            });
            
            // Add some random books to ensure variety
            const remainingBooks = allBooks.filter(book => 
                !recommendations.includes(book) && 
                !issuedBooks.some(issued => issued.id === book.id));
            
            const randomBooks = remainingBooks
                .sort(() => 0.5 - Math.random())
                .slice(0, Math.max(0, 4 - recommendations.length));
            
            recommendations = recommendations.concat(randomBooks);
            
            // Limit to 4 books for display
            recommendedBooks = recommendations.slice(0, 4);
            
            const container = document.getElementById('recommendedBooks');
            container.innerHTML = '';
            
            // Display recommended books
            recommendedBooks.forEach(book => {
                container.appendChild(createNeuBrutalismBookCard(book));
            });
        }

        function loadNewArrivals() {
            // Simulate new arrivals with random books
            const newArrivals = [...allBooks]
                .sort(() => 0.5 - Math.random())
                .slice(0, 4);
            
            const container = document.getElementById('newArrivalsBooks');
            container.innerHTML = '';
            
            // Display new arrivals
            newArrivals.forEach(book => {
                container.appendChild(createNeuBrutalismBookCard(book));
            });
        }

        function searchBooks() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            const filter = document.getElementById('searchFilter').value;
            
            if (!searchTerm) {
                showNotification('Please enter a search term', 'error');
                return;
            }
            
            let results = [];
            
            if (filter === 'all') {
                // Search in all fields
                results = allBooks.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.category.toLowerCase().includes(searchTerm) ||
                    book.isbn.toLowerCase().includes(searchTerm) ||
                    book.description.toLowerCase().includes(searchTerm)
                );
            } else if (filter === 'title') {
                results = allBooks.filter(book => book.title.toLowerCase().includes(searchTerm));
            } else if (filter === 'author') {
                results = allBooks.filter(book => book.author.toLowerCase().includes(searchTerm));
            } else if (filter === 'subject') {
                results = allBooks.filter(book => 
                    book.category.toLowerCase().includes(searchTerm) ||
                    book.description.toLowerCase().includes(searchTerm)
                );
            } else if (filter === 'isbn') {
                results = allBooks.filter(book => book.isbn.toLowerCase().includes(searchTerm));
            }
            
            displaySearchResults(results, searchTerm);
        }

        function setQuickFilter(button, filterTerm) {
            document.getElementById('searchInput').value = filterTerm;
            searchBooks();
        }

        // UI Display Functions
        function displaySearchResults(results, searchTerm) {
            const resultsContainer = document.getElementById('searchResultsList');
            const resultsSection = document.getElementById('searchResults');
            const noResultsMessage = document.getElementById('noResults');
            const resultCount = document.getElementById('resultCount');
            
            resultsContainer.innerHTML = '';
            resultsSection.classList.remove('hidden');
            
            if (results.length === 0) {
                noResultsMessage.classList.remove('hidden');
                resultCount.textContent = '0';
                return;
            }
            
            noResultsMessage.classList.add('hidden');
            resultCount.textContent = results.length;
            
            // Display results as a list
            results.forEach(book => {
                const resultItem = document.createElement('div');
                resultItem.className = 'nb-card bg-white p-4 flex flex-col md:flex-row';
                
                // Highlight the search term in the title and description
                const highlightedTitle = book.title.replace(
                    new RegExp(searchTerm, 'gi'), 
                    match => `<span class="bg-yellow-200">${match}</span>`
                );
                
                const highlightedDescription = book.description.replace(
                    new RegExp(searchTerm, 'gi'), 
                    match => `<span class="bg-yellow-200">${match}</span>`
                );
                
                resultItem.innerHTML = `
                    <div class="md:flex-shrink-0">
                        <img src="${book.coverUrl}" alt="${book.title}" class="h-48 w-32 object-cover book-cover">
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-6 flex-grow">
                        <h3 class="text-lg font-bold">${highlightedTitle}</h3>
                        <p class="text-gray-600">by ${book.author}</p>
                        <div class="mt-1 flex items-center">
                            <span class="text-sm ${book.available ? 'book-status-available' : 'book-status-issued'}">
                                <i class="bi ${book.available ? 'bi-circle-fill' : 'bi-dash-circle-fill'}"></i>
                                ${book.available ? 'Available' : 'Checked Out'}
                            </span>
                            <span class="mx-2"></span>
                            <span class="text-sm text-gray-500">ISBN: ${book.isbn}</span>
                        </div>
                        <p class="mt-2 text-gray-700 line-clamp-2">${highlightedDescription}</p>
                        <div class="mt-3">
                            <button onclick="showBookDetail('${book.id}')" class="inline-flex items-center px-3 py-1 text-sm font-medium bg-blue-200 border-2 border-black hover:bg-blue-300">
                                <i class="bi bi-info-circle mr-1"></i> More Info
                            </button>
                            ${book.available ? `
                                <button onclick="reserveBook('${book.id}')" class="ml-2 inline-flex items-center px-3 py-1 text-sm font-medium bg-green-200 border-2 border-black hover:bg-green-300">
                                    <i class="bi bi-bookmark-plus mr-1"></i> Reserve
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(resultItem);
            });
        }

        function displayIssuedBooks() {
            const container = document.getElementById('issuedBooksList');
            const noIssuedBooksMessage = document.getElementById('noIssuedBooks');
            
            container.innerHTML = '';
            
            if (issuedBooks.length === 0) {
                noIssuedBooksMessage.classList.remove('hidden');
                container.classList.add('hidden');
                return;
            }
            
            noIssuedBooksMessage.classList.add('hidden');
            container.classList.remove('hidden');
            
            issuedBooks.forEach(book => {
                // Find the complete book details
                const bookDetails = allBooks.find(b => b.id === book.id) || book;
                
                const issueDate = new Date(book.issueDate);
                const dueDate = new Date(book.dueDate);
                const today = new Date();
                
                // Calculate days remaining
                const daysRemaining = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                const isOverdue = daysRemaining < 0;
                
                const bookItem = document.createElement('div');
                bookItem.className = 'nb-card bg-white p-4 flex flex-col sm:flex-row';
                
                bookItem.innerHTML = `
                    <div class="sm:flex-shrink-0 text-center">
                        <img src="${bookDetails.coverUrl}" alt="${bookDetails.title}" class="h-48 w-32 object-cover book-cover inline-block">
                    </div>
                    <div class="mt-4 sm:mt-0 sm:ml-6 flex-grow">
                        <h3 class="text-lg font-bold">${bookDetails.title}</h3>
                        <p class="text-gray-600">by ${bookDetails.author}</p>
                        <div class="mt-2 space-y-1">
                            <p class="text-sm"><span class="text-gray-500">Issue Date:</span> ${formatDate(issueDate)}</p>
                            <p class="text-sm"><span class="text-gray-500">Due Date:</span> ${formatDate(dueDate)}</p>
                            <p class="text-sm font-bold ${isOverdue ? 'text-red-600' : daysRemaining <= 3 ? 'text-amber-600' : 'text-green-600'}">
                                ${isOverdue ? `Overdue by ${Math.abs(daysRemaining)} days` : `${daysRemaining} days remaining`}
                            </p>
                        </div>
                        <div class="mt-3 flex space-x-2">
                            <button onclick="showBookDetail('${bookDetails.id}')" class="inline-flex items-center px-3 py-1 text-sm font-medium bg-blue-200 border-2 border-black hover:bg-blue-300">
                                <i class="bi bi-info-circle mr-1"></i> Details
                            </button>
                            <button onclick="renewBook('${bookDetails.id}')" class="inline-flex items-center px-3 py-1 text-sm font-medium bg-amber-200 border-2 border-black hover:bg-amber-300">
                                <i class="bi bi-arrow-clockwise mr-1"></i> Renew
                            </button>
                            <button onclick="returnBook('${bookDetails.id}')" class="inline-flex items-center px-3 py-1 text-sm font-medium bg-green-200 border-2 border-black hover:bg-green-300">
                                <i class="bi bi-check-lg mr-1"></i> Return
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(bookItem);
            });
        }

        function displayBorrowHistory() {
            const container = document.getElementById('historyList');
            container.innerHTML = '';
            
            if (borrowHistory.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.innerHTML = `
                    <td colspan="4" class="py-4 text-center text-gray-500 italic">No borrowing history available</td>
                `;
                container.appendChild(emptyRow);
                return;
            }
            
            // Sort history by issue date (newest first)
            const sortedHistory = [...borrowHistory].sort((a, b) => 
                new Date(b.issuedDate) - new Date(a.issuedDate)
            );
            
            sortedHistory.forEach(item => {
                const row = document.createElement('tr');
                
                const statusClass = item.status === 'Returned' 
                    ? 'text-green-600 bg-green-100' 
                    : item.status === 'Overdue' 
                        ? 'text-red-600 bg-red-100' 
                        : 'text-blue-600 bg-blue-100';
                
                row.innerHTML = `
                    <td class="py-3 px-4 border-b border-gray-300">${item.title}</td>
                    <td class="py-3 px-4 border-b border-gray-300">${formatDate(new Date(item.issuedDate))}</td>
                    <td class="py-3 px-4 border-b border-gray-300">${formatDate(new Date(item.returnDate))}</td>
                    <td class="py-3 px-4 border-b border-gray-300">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-none border border-black ${statusClass}">
                            ${item.status}
                        </span>
                    </td>
                `;
                
                container.appendChild(row);
            });
        }

        // Book Detail and Actions
        function showBookDetail(bookId) {
            const book = allBooks.find(b => b.id === bookId);
            
            if (!book) return;
            
            currentBookDetail = book;
            
            // Update modal content
            document.getElementById('modalTitle').textContent = book.title;
            
            // Check if the book is already issued by this user
            const isIssued = issuedBooks.some(b => b.id === book.id);
            
            // Format availability text and style
            const availabilityText = book.available ? 'Available' : 'Checked Out';
            const availabilityClass = book.available ? 'text-green-600' : 'text-red-600';
            
            document.getElementById('modalContent').innerHTML = `
                <div class="flex flex-col md:flex-row">
                    <div class="md:flex-shrink-0">
                        <img src="${book.coverUrl}" alt="${book.title}" class="h-64 w-48 object-cover book-cover">
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-6">
                        <h3 class="text-lg font-bold">${book.title}</h3>
                        <p class="text-gray-600">by ${book.author}</p>
                        
                        <div class="mt-3 space-y-2">
                            <p><span class="font-medium">ISBN:</span> ${book.isbn}</p>
                            <p><span class="font-medium">Publisher:</span> ${book.publisher}, ${book.year}</p>
                            <p><span class="font-medium">Category:</span> ${formatDepartment(book.category)}</p>
                            <p class="flex items-center">
                                <span class="font-medium mr-2">Status:</span>
                                <span class="${availabilityClass} flex items-center">
                                    <i class="bi ${book.available ? 'bi-circle-fill' : 'bi-dash-circle-fill'} mr-1"></i>
                                    ${availabilityText}
                                </span>
                            </p>
                        </div>
                        
                        <div class="mt-4 pt-3 border-t-2 border-black">
                            <h4 class="font-medium mb-1">Description</h4>
                            <p class="text-gray-700">${book.description}</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-5 pt-4 border-t-2 border-black">
                    <h4 class="font-medium mb-3">Similar Books</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        ${getSimilarBooks(book, 4).map(similarBook => `
                            <div class="text-center">
                                <img src="${similarBook.coverUrl}" alt="${similarBook.title}" class="h-40 w-28 object-cover book-cover inline-block mb-1 cursor-pointer" onclick="showBookDetail('${similarBook.id}')">
                                <p class="text-xs font-medium line-clamp-2">${similarBook.title}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Update reserve button state
            const reserveButton = document.getElementById('reserveButton');
            reserveButton.onclick = () => reserveBook(book.id);
            
            if (isIssued) {
                reserveButton.textContent = 'Already Issued';
                reserveButton.disabled = true;
                reserveButton.className = 'px-4 py-2 bg-gray-400 text-black border-2 border-black font-bold cursor-not-allowed';
            } else if (!book.available) {
                reserveButton.innerHTML = '<i class="bi bi-bookmark-plus mr-1"></i> Join Waitlist';
                reserveButton.disabled = false;
                reserveButton.className = 'px-4 py-2 bg-amber-300 text-black border-2 border-black font-bold nb-button';
            } else {
                reserveButton.innerHTML = '<i class="bi bi-bookmark-plus mr-1"></i> Reserve Book';
                reserveButton.disabled = false;
                reserveButton.className = 'px-4 py-2 bg-green-300 text-black border-2 border-black font-bold nb-button';
            }
            
            // Show modal
            document.getElementById('bookDetailModal').classList.remove('hidden');
        }

        function closeBookDetail() {
            document.getElementById('bookDetailModal').classList.add('hidden');
            currentBookDetail = null;
        }

        function reserveBook(bookId) {
            const book = allBooks.find(b => b.id === bookId);
            
            if (!book) return;
            
            if (!book.available) {
                showNotification('This book is currently unavailable. You have been added to the waitlist.', 'success');
                return;
            }
            
            // Check if already issued
            if (issuedBooks.some(b => b.id === bookId)) {
                showNotification('You already have this book checked out.', 'error');
                return;
            }
            
            // Create issue record
            const today = new Date();
            const dueDate = new Date();
            dueDate.setDate(today.getDate() + 28); // 4 weeks loan period
            
            const issueRecord = {
                id: book.id,
                title: book.title,
                author: book.author,
                isbn: book.isbn,
                category: book.category,
                issueDate: today.toISOString().split('T')[0],
                dueDate: dueDate.toISOString().split('T')[0]
            };
            
            // Add to user's issued books
            issuedBooks.push(issueRecord);
            
            // Update book availability
            book.available = false;
            
            // Close modal
            closeBookDetail();
            
            showNotification(`"${book.title}" has been reserved successfully.`, 'success');
        }

        function renewBook(bookId) {
            const bookIndex = issuedBooks.findIndex(b => b.id === bookId);
            
            if (bookIndex === -1) return;
            
            const book = issuedBooks[bookIndex];
            
            // Calculate new due date (add 2 weeks)
            const currentDueDate = new Date(book.dueDate);
            const newDueDate = new Date(currentDueDate);
            newDueDate.setDate(newDueDate.getDate() + 14);
            
            // Update due date
            issuedBooks[bookIndex].dueDate = newDueDate.toISOString().split('T')[0];
            
            // Refresh display
            displayIssuedBooks();
            
            showNotification(`"${book.title}" has been renewed. New due date: ${formatDate(newDueDate)}`, 'success');
        }

        function returnBook(bookId) {
            const bookIndex = issuedBooks.findIndex(b => b.id === bookId);
            
            if (bookIndex === -1) return;
            
            const book = issuedBooks[bookIndex];
            
            // Remove from issued books
            issuedBooks.splice(bookIndex, 1);
            
            // Add to history
            const returnRecord = {
                title: book.title,
                issuedDate: book.issueDate,
                returnDate: new Date().toISOString().split('T')[0],
                status: 'Returned'
            };
            
            borrowHistory.unshift(returnRecord);
            
            // Update book availability
            const originalBook = allBooks.find(b => b.id === bookId);
            if (originalBook) {
                originalBook.available = true;
            }
            
            // Refresh displays
            displayIssuedBooks();
            displayBorrowHistory();
            
            showNotification(`"${book.title}" has been returned successfully.`, 'success');
        }

        // Chatbot Functions (same as in the original)
        function sendMessage() {
            const messageInput = document.getElementById('chatInput');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            // Clear input
            messageInput.value = '';
            
            // Add user message to chat
            addChatMessage(message, 'user');
            
            // Show typing indicator
            showTypingIndicator();
            
            // Generate response (simulate AI processing time)
            setTimeout(() => {
                // Remove typing indicator
                removeTypingIndicator();
                
                // Add AI response
                const response = generateChatbotResponse(message);
                addChatMessage(response, 'bot');
                
                // Scroll to bottom
                scrollChat();
            }, 1500);
        }

        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            
            messageElement.className = `chat-message ${sender === 'user' ? 'user-message' : 'bot-message'}`;
            messageElement.innerHTML = message;
            
            chatContainer.appendChild(messageElement);
            scrollChat();
        }

        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatMessages');
            const typingIndicator = document.createElement('div');
            
            typingIndicator.id = 'typingIndicator';
            typingIndicator.className = 'chat-message bot-message';
            typingIndicator.innerHTML = `
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            
            chatContainer.appendChild(typingIndicator);
            scrollChat();
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function scrollChat() {
            const chatContainer = document.getElementById('chatMessages');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function generateChatbotResponse(message) {
            message = message.toLowerCase();
            
            // Check for book recommendations request
            if (message.includes('recommend') || message.includes('suggestion')) {
                if (message.includes('computer') || message.includes('programming') || message.includes('code')) {
                    return generateRecommendationResponse('computer-science');
                } else if (message.includes('electrical') || message.includes('circuit') || message.includes('electronics')) {
                    return generateRecommendationResponse('electrical-engineering');
                } else if (message.includes('mechanical') || message.includes('thermodynamics')) {
                    return generateRecommendationResponse('mechanical-engineering');
                } else if (message.includes('math') || message.includes('calculus')) {
                    return generateRecommendationResponse('mathematics');
                } else if (message.includes('history')) {
                    return generateRecommendationResponse('history');
                } else {
                    // Default to user's department
                    return generateRecommendationResponse(currentUser.department);
                }
            }
            
            // Check for specific book queries
            if (message.includes('artificial intelligence') || message.includes('ai') || message.includes('machine learning')) {
                const aiBooks = allBooks.filter(book => 
                    book.title.toLowerCase().includes('ai') || 
                    book.title.toLowerCase().includes('artificial intelligence') || 
                    book.title.toLowerCase().includes('machine learning') ||
                    book.description.toLowerCase().includes('artificial intelligence')
                );
                
                if (aiBooks.length > 0) {
                    return generateBookListResponse('AI and Machine Learning', aiBooks.slice(0, 3));
                }
            }
            
            // Check for status queries
            if (message.includes('my books') || message.includes('borrowed') || message.includes('checked out')) {
                if (issuedBooks.length === 0) {
                    return "You don't have any books checked out at the moment. Would you like me to recommend some books based on your department?";
                } else {
                    return `You currently have ${issuedBooks.length} book(s) checked out:<br>
                        <ul class="list-disc ml-5 mt-1">
                            ${issuedBooks.map(book => `<li>${book.title} (due on ${formatDate(new Date(book.dueDate))})</li>`).join('')}
                        </ul>`;
                }
            }
            
            // Check for help queries
            if (message.includes('help') || message.includes('how to') || message.includes('guide')) {
                return `I can help you with the following:<br>
                    <ul class="list-disc ml-5 mt-1">
                        <li>Finding books by title, author, or subject</li>
                        <li>Getting recommendations based on your interests</li>
                        <li>Checking your borrowed books status</li>
                        <li>Information about library services</li>
                        <li>Finding exam materials</li>
                    </ul>
                    Just let me know what you need!`;
            }
            
            // Check for library info queries
            if (message.includes('library hours') || message.includes('open') || message.includes('close') || message.includes('hours')) {
                return "The library is open from 8:00 AM to 10:00 PM, Monday through Saturday. On Sundays, we're open from 10:00 AM to 6:00 PM.";
            }
            
            // Check for exam-related queries
            if (message.includes('exam') || message.includes('question paper') || message.includes('jee') || message.includes('gate') || message.includes('net') || message.includes('previous year')) {
                return `I can help you find previous year question papers for competitive exams. We have papers for:<br>
                    <ul class="list-disc ml-5 mt-1">
                        <li>JEE (Mains & Advanced)</li>
                        <li>GATE (all disciplines)</li>
                        <li>UGC NET</li>
                        <li>NEET</li>
                        <li>And more</li>
                    </ul>
                    <p class="mt-2">Go to the <a href="#" onclick="showSection('exams')" class="text-blue-600 underline">Exam Papers</a> section to browse and download.</p>`;
            }
            
            if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                return `Hi ${currentUser.name}! How can I help you today? Looking for book recommendations, information about the library, or exam materials?`;
            }
            
            // Default response
            return "I'm not sure I understand. Could you try rephrasing your question? You can ask me for book recommendations, information about your issued books, exams, or library services.";
        }

        function generateRecommendationResponse(category) {
            // Get books from the specified category
            const categoryBooks = allBooks.filter(book => book.category === category && book.available);
            
            if (categoryBooks.length === 0) {
                return `I don't have specific recommendations for ${formatDepartment(category)} at the moment. Would you like suggestions from a different category?`;
            }
            
            // Select up to 3 random books from the category
            const recommendations = categoryBooks
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);
            
            return `Here are some recommended books for ${formatDepartment(category)}:<br>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-3">
                    ${recommendations.map(book => `
                        <div class="text-center">
                            <img src="${book.coverUrl}" alt="${book.title}" class="h-40 w-28 object-cover book-cover mb-1 cursor-pointer inline-block" onclick="showBookDetail('${book.id}')">
                            <p class="text-xs font-medium">${book.title}</p>
                            <p class="text-xs">${book.author}</p>
                            <button onclick="showBookDetail('${book.id}')" class="mt-1 text-xs bg-blue-200 px-2 py-1 border border-black hover:bg-blue-300">Details</button>
                        </div>
                    `).join('')}
                </div>
                <p class="mt-3">Click on any book to view more details. Would you like more recommendations?</p>`;
        }

        function generateBookListResponse(category, books) {
            return `Here are some books on ${category}:<br>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-3">
                    ${books.map(book => `
                        <div class="text-center">
                            <img src="${book.coverUrl}" alt="${book.title}" class="h-40 w-28 object-cover book-cover mb-1 cursor-pointer inline-block" onclick="showBookDetail('${book.id}')">
                            <p class="text-xs font-medium">${book.title}</p>
                            <p class="text-xs">${book.author}</p>
                            <button onclick="showBookDetail('${book.id}')" class="mt-1 text-xs bg-blue-200 px-2 py-1 border border-black hover:bg-blue-300">Details</button>
                        </div>
                    `).join('')}
                </div>
                <p class="mt-3">Click on any book to view more details. Would you like more suggestions?</p>`;
        }

        // Helper Functions
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type === 'success' ? 'bg-green-300' : 'bg-red-300'} text-black shadow-lg`;
            notification.innerHTML = `
                <div class="flex items-center p-4">
                    <i class="bi ${type === 'success' ? 'bi-check-circle' : 'bi-exclamation-circle'} mr-3 text-xl"></i>
                    <p class="font-bold">${message}</p>
                </div>
            `;
            
            document.body.appendChild(notification);
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.classList.add('opacity-0');
                notification.style.transition = 'opacity 0.5s ease';
                
                setTimeout(() => {
                    notification.remove();
                }, 500);
            }, 3000);
        }

        function formatDepartment(department) {
            return department.split('-')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');
        }

        function formatDate(date) {
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function getRelatedDepartments(department) {
            const relationMap = {
                'computer-science': ['electrical-engineering', 'mathematics'],
                'electrical-engineering': ['computer-science', 'mechanical-engineering', 'physics'],
                'mechanical-engineering': ['electrical-engineering', 'civil-engineering', 'physics'],
                'civil-engineering': ['mechanical-engineering', 'mathematics'],
                'chemistry': ['biology', 'physics'],
                'physics': ['mathematics', 'electrical-engineering', 'chemistry'],
                'mathematics': ['computer-science', 'physics', 'civil-engineering'],
                'biology': ['chemistry', 'physics'],
                'literature': ['history'],
                'history': ['literature']
            };
            
            return relationMap[department] || [];
        }

        function getSimilarBooks(book, count = 3) {
            // Find books in the same category
            const sameCategoryBooks = allBooks.filter(b => 
                b.id !== book.id && 
                b.category === book.category
            );
            
            // If not enough books in the same category, add books from related categories
            if (sameCategoryBooks.length < count) {
                const relatedCategories = getRelatedDepartments(book.category);
                const relatedCategoryBooks = allBooks.filter(b => 
                    b.id !== book.id && 
                    relatedCategories.includes(b.category) && 
                    !sameCategoryBooks.find(sb => sb.id === b.id)
                );
                
                return [...sameCategoryBooks, ...relatedCategoryBooks].slice(0, count);
            }
            
            // Return random selection of books from the same category
            return sameCategoryBooks
                .sort(() => 0.5 - Math.random())
                .slice(0, count);
        }

        function setDepartmentIcon(department) {
            const iconContainer = document.getElementById('departmentIconContainer');
            
            // Set icon and colors based on department
            let iconClass = 'bi-book';
            let bgColor = 'cs-color';
            
            if (department === 'computer-science') {
                iconClass = 'bi-laptop';
                bgColor = 'cs-color';
            } else if (department === 'electrical-engineering') {
                iconClass = 'bi-lightning-charge';
                bgColor = 'ee-color';
            } else if (department === 'mechanical-engineering') {
                iconClass = 'bi-gear';
                bgColor = 'me-color';
            } else if (department === 'civil-engineering') {
                iconClass = 'bi-building';
                bgColor = 'ce-color';
            } else if (department === 'chemistry') {
                iconClass = 'bi-flask';
                bgColor = 'ch-color';
            } else if (department === 'physics') {
                iconClass = 'bi-atom';
                bgColor = 'ph-color';
            } else if (department === 'mathematics') {
                iconClass = 'bi-calculator';
                bgColor = 'ma-color';
            } else if (department === 'biology') {
                iconClass = 'bi-virus';
                bgColor = 'bi-color';
            } else if (department === 'literature') {
                iconClass = 'bi-journal-richtext';
                bgColor = 'li-color';
            } else if (department === 'history') {
                iconClass = 'bi-clock-history';
                bgColor = 'hi-color';
            }
            
            // Update icon container
            iconContainer.className = `department-icon ${bgColor}`;
            iconContainer.innerHTML = `<i class="bi ${iconClass}"></i>`;
        }

        function createNeuBrutalismBookCard(book) {
            const card = document.createElement('div');
            card.className = 'nb-card bg-white p-4 hover:bg-gray-50 transition-all';
            
            card.innerHTML = `
                <div class="relative">
                    <img src="${book.coverUrl}" alt="${book.title}" class="w-full h-64 object-cover book-cover mb-3">
                    ${!book.available ? '<div class="absolute top-2 right-2 bg-red-300 text-black font-bold px-2 py-1 border-2 border-black">Unavailable</div>' : ''}
                </div>
                <h3 class="font-bold mb-1 line-clamp-1">${book.title}</h3>
                <p class="text-gray-600 text-sm mb-2">${book.author}</p>
                <div class="flex justify-between items-center">
                    <span class="text-xs bg-blue-100 px-2 py-1 border border-black">${formatDepartment(book.category).split(' ')[0]}</span>
                    <button onclick="showBookDetail('${book.id}')" class="text-sm bg-yellow-200 px-2 py-1 border border-black hover:bg-yellow-300">
                        Details
                    </button>
                </div>
            `;
            
            return card;
        }
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>